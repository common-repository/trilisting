!function(t){"use strict";var i=i||{};i={init:function(){t("select#trilisting-shortcodes, .trilisting-multiselect-input, .trilisting-select-input").chosen(),this.insert_shortcode(),this.select_shortcode()},update:function(){var i=t("#trilisting-shortcodes").val(),n="["+i;t("#trilisting-options-"+i+" input[type=checkbox]").each(function(){"none"!=t(this).closest(".option-item-wrap").css("display")&&(t(this).is(":checked")?n+=" "+t(this).attr("name")+'="1"':n+=" "+t(this).attr("name")+'="0"')}),t("#trilisting-options-"+i+' select:not("[multiple=multiple]")').each(function(){"none"!=t(this).closest(".option-item-wrap").css("display")&&""!=t(this).val()&&(n+=" "+t(this).attr("id")+'="'+t(this).val()+'"')}),t("#trilisting-options-"+i+" select[multiple=multiple]").each(function(){if("none"!=t(this).closest(".option-item-wrap").css("display")){var i=null!=t(this).val()&&t(this).val().length>0?t(this).val():"";""!=i&&(n+=" "+t(this).attr("id")+'="'+i+'"')}}),t("#trilisting-options-"+i+" input[type=text]").each(function(){"none"!=t(this).closest(".option-item-wrap").css("display")&&void 0!==t(this).attr("name")&&""!=t(this).val()&&(n+=" "+t(this).attr("name")+'="'+t(this).val()+'"')}),n+="]",window.wp.media.editor.insert(n),t.magnificPopup.close()},insert_shortcode:function(){t("#trilisting-insert-shortcode").on("click",function(){return i.update(),!1})},select_shortcode:function(){t("#trilisting-shortcodes").on("change",function(){var i=t(this).val(),n=t("#trilisting-options-"+i);n.attr("data-type");t(".shortcode-options").hide(),n.show()})},insert_types:function(){t(".tril-field-type-btn").on("click",function(){var i=t(this).parent().siblings('input[type="text"]'),n=i.val();return i.val(n+t(this).text()+","),!1})}},t(document).ready(function(){t("body").on("click",".trilisting-insert-shortcode-button",function(){tinymce.execCommand("mceFocus",!1),t.magnificPopup.open({mainClass:"mfp-zoom-in",items:{src:"#trilisting-input-shortcode"},type:"inline",removalDelay:400},0)}),i.init(),i.insert_types()})}(jQuery);